# dsx-parse
_Walt Lillyman, 9/20/23_

Initially forked from `mcfitz2/dsx-parse`, this repo contains code to parse Datastage `.dsx` files to identify Datastage jobs and the objects they operate on/with. The code only parses and enumerates things, it doesn't explain relationships or recurse for deeper details.

The python programs are intended to run as utilities on the desktop, not as an orchestrated app in the cloud. They've only been run on Windows.

## Python venv setup.txt
This contains steps to set up a python virtual environment, ensuring correct libraries are installed for just this program, not affecting other python work on this PC.

## requirements.txt
Contains list of libraries required to be installed with pip as described in `Python venv setup.txt`

## dsx-parse.py
The code requires as input a single `.dsx` file which can be generated by a Datastage administrator via the Datastage "export project" function. A `.dsx` file is a text file containing the hierarchy of Datastage jobs, records and subrecords for the Datastage project.

By parsing this text, one can programmatically pick out items of interest and write just those things to an output file, allowing quicker assessment of what's in the Datastage project.

The current effort is intended to answer the question, what are the names of the Datastage jobs that query Teradata and write to Oracle? By knowing what keywords to search for in the `.dsx` file, the question can be answered without having to navigate the Datastage project canvas via the Datastage UI.

The original program, `dsx-parse.py` accepted as arguments a 'mode', and a `.dsx` path & file name. The modes, `showtree` and `showderivations` produced output I didn't require. So I added a mode, `neither`, which produces neither output, but still parses the file. The command-line arguments are stored in the file, `.vscode\launch.json`

The parsing in `dsx-parse.py` produces a structured python dictionary object representing the contents of the `.dsx` file. The dictionary object is what can be perused to find items of interest.

Parsing a large Datastage project `.dsx` file can take some time, so I save the dictionary to a file in pickle (`.pkl`) format so that subsequent analysis doesn't have to wait for the Datastage project `.dsx` file to be parsed every time.

## write_parsed.py
A subsequent program I wrote from scratch, `write_parsed.py` reads the dictionary object from the `.pkl` file, looks for items of interest, and outputs those to a delimited text file for browsing & filtering in Excel.

## scrap heap.py
This contains junk I typed, documented and tried before settling on the final product. It's a frightening revelation of my amateur python skills, don't show my boss.